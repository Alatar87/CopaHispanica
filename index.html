<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Copa Hisp√°nica ¬∑ Temporada 60</title>
  <meta name="description" content="Copa Hisp√°nica (Temporada 60): 16 equipos, 2 grupos, 14 jornadas ida/vuelta, descanso y finales.">
  <style>
    :root{
      --card:rgba(255,255,255,.90);
      --card2:rgba(255,255,255,.80);
      --text:#0b1220;
      --muted:#334155;
      --accent:#2563eb;
      --accent2:#7c3aed;
      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#e11d48;
      --line:rgba(15,23,42,.14);
      --shadow:0 12px 32px rgba(2,6,23,.22);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;color:var(--text)}
    body{
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(14,165,233,.55), transparent 60%),
        radial-gradient(900px 600px at 85% 15%, rgba(167,139,250,.55), transparent 60%),
        radial-gradient(900px 700px at 40% 95%, rgba(34,197,94,.35), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.86));
      min-height:100vh;
    }
    a{color:var(--accent)}
    .container{max-width:1150px;margin:0 auto;padding:22px}
    header{
      position:sticky;top:0;z-index:10;
      backdrop-filter:saturate(170%) blur(10px);
      background:rgba(255,255,255,.72);
      border-bottom:1px solid var(--line);
    }
    .nav{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:10px 22px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:42px;height:42px;border-radius:14px;
      background:radial-gradient(circle at 30% 30%, #38bdf8, #a78bfa);
      box-shadow:0 10px 24px rgba(37,99,235,.18);
    }
    .brand h1{font-size:1.05rem;margin:0;letter-spacing:.35px}
    .menu{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .menu a{
      padding:8px 12px;border-radius:999px;
      background:rgba(255,255,255,.75);
      text-decoration:none;color:var(--text);
      border:1px solid var(--line);
    }
    .menu a:hover{transform:translateY(-1px); box-shadow:0 10px 18px rgba(2,6,23,.10)}
    .sanctioned{
      display:flex;align-items:center;gap:10px;
      padding:6px 10px;border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.78);
    }
    .sanctioned img{height:34px;display:block;object-fit:contain}
    .hero{padding:54px 22px 18px}
    .hero .wrap{display:grid;grid-template-columns:1.15fr .85fr;gap:18px}
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:18px;
      box-shadow:var(--shadow);
      padding:18px;
    }
    .card.soft{background:var(--card2)}
    .title{font-size:clamp(28px,3vw,42px);margin:0 0 6px}
    .subtitle{margin:0;color:var(--muted)}
    .pill{
      display:inline-block;margin-top:10px;padding:6px 10px;border-radius:999px;
      background:rgba(37,99,235,.10);
      border:1px solid rgba(37,99,235,.25);
      color:#0b1220;font-size:.92rem
    }
    .grid{display:grid;gap:14px}
    .grid.cols-2{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .grid.cols-3{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    h2{margin:0 0 10px;font-size:1.22rem}
    h3{margin:0 0 8px;font-size:1.05rem}
    .muted{color:var(--muted)}
    .kpi{display:flex;gap:14px;align-items:center}
    .kpi .num{font-weight:900;font-size:1.5rem}
    table{width:100%;border-collapse:collapse;background:rgba(255,255,255,.55);border:1px solid var(--line);border-radius:14px;overflow:hidden}
    th,td{padding:10px;border-bottom:1px solid var(--line);text-align:left;vertical-align:top}
    th{color:#0b1220;font-weight:750;background:rgba(37,99,235,.08)}
    tr:last-child td{border-bottom:none}
    .section{padding:18px 0}
    .two-col{display:grid;grid-template-columns:2fr 1fr;gap:18px}
    .note{
      background:rgba(34,197,94,.10);
      border:1px dashed rgba(34,197,94,.35);
      padding:12px;border-radius:14px
    }
    .badge{
      padding:4px 10px;border-radius:999px;font-size:.86rem;
      border:1px solid var(--line);display:inline-block;background:rgba(255,255,255,.7)
    }
    .badge.bad{border-color:rgba(225,29,72,.35);background:rgba(225,29,72,.08)}
    .groupTitle{display:flex;gap:8px;align-items:center}
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block}
    .dot.azul{background:#0ea5e9}
    .dot.rojo{background:#e11d48}
    .footer{padding:24px 0;color:var(--muted);text-align:center}
    @media (max-width: 920px){ .hero .wrap{grid-template-columns:1fr} .two-col{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <header>
    <nav class="nav container">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Copa Hisp√°nica ¬∑ Temporada 60</h1>
          <div class="muted" style="font-size:.88rem">
            Enlace BR: <a href="https://www.blackoutrugby.com/home.php" target="_blank" rel="noopener">blackoutrugby.com/home.php</a>
          </div>
        </div>
      </div>

      <div class="menu">
        <a href="#info">Info</a>
        <a href="#grupos">Grupos</a>
        <a href="#calendario">Calendario</a>
        <a href="#clasificacion">Clasificaci√≥n</a>
        <a href="#reglamento">Reglamento</a>
        <a href="#contacto">Contacto</a>
        <span class="sanctioned" title="Sanctioned Tournament">
          <img src="sanctioned-logo.png" alt="Blackout Rugby ¬∑ Sanctioned Tournament">
        </span>
      </div>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="container wrap">
        <div class="card">
          <p class="pill">Lunes ¬∑ 16 equipos ¬∑ 2 grupos ¬∑ Ida/Vuelta</p>
          <h2 class="title">Copa Hisp√°nica</h2>
          <p class="subtitle">Jornadas 1‚Äì14 (grupos) ¬∑ Jornada 15 descanso ¬∑ Jornada 16 finales y cruces por puestos.</p>

          <div class="grid cols-3" style="margin-top:14px">
            <div class="kpi card soft"><div><div class="num">16</div><div class="muted">Equipos</div></div></div>
            <div class="kpi card soft"><div><div class="num">14</div><div class="muted">Jornadas de grupos</div></div></div>
            <div class="kpi card soft"><div><div class="num">üèÜ</div><div class="muted">Trofeos cl√°sicos + Cuchara</div></div></div>
          </div>

          <div class="note" style="margin-top:12px">
            <strong>Inscripciones cerradas.</strong> Los grupos se han creado seg√∫n ranking nacional.
            <div class="muted" style="margin-top:6px">Inicio: <strong>lunes 19 de enero de 2026</strong> (y cada lunes una ronda).</div>
          </div>
        </div>

        <div class="card">
          <h2>Pr√≥ximo partido</h2>
          <div id="proximo" class="muted">A√∫n no definido</div>
          <hr style="border:none;border-top:1px solid var(--line);margin:16px 0">
          <h2>√öltimos resultados</h2>
          <ul id="ultimos" class="muted" style="padding-left:18px;margin:0"></ul>
        </div>
      </div>
    </section>

    <section id="info" class="section">
      <div class="container two-col">
        <div class="card">
          <h2>Resumen</h2>
          <p>La Copa Hisp√°nica se juega los <strong>lunes</strong> y reparte trofeos a los primeros clasificados y al √∫ltimo (Cuchara de Madera).</p>
          <p>En la <strong>Temporada 60</strong> participan <strong>16 equipos</strong> y se han creado <strong>2 grupos</strong> (Azul y Rojo). Se disputan <strong>14 jornadas</strong> (ida y vuelta dentro de cada grupo), <strong>Jornada 15</strong> de descanso y <strong>Jornada 16</strong> con finales y cruces por puestos para cerrar la clasificaci√≥n final.</p>
        </div>
        <div class="card">
          <h2>Sanctioned Tournament</h2>
          <p class="muted">Torneo sancionado por Blackout Rugby.</p>
          <div class="sanctioned" style="justify-content:space-between">
            <span class="muted" style="font-size:.9rem">Logo oficial</span>
            <img src="sanctioned-logo.png" alt="Blackout Rugby ¬∑ Sanctioned Tournament">
          </div>
        </div>
      </div>
    </section>

    <section id="grupos" class="section">
      <div class="container">
        <div class="grid cols-2">
          <div class="card">
            <div class="groupTitle"><span class="dot azul"></span><h2 style="margin:0">Grupo AZUL</h2></div>
            <div id="grupoAzul" class="grid" style="margin-top:10px"></div>
          </div>
          <div class="card">
            <div class="groupTitle"><span class="dot rojo"></span><h2 style="margin:0">Grupo ROJO</h2></div>
            <div id="grupoRojo" class="grid" style="margin-top:10px"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="calendario" class="section">
      <div class="container">
        <div class="card">
          <h2>Calendario</h2>
          <table id="tablaCal">
            <thead><tr><th>Jrn</th><th>Fecha</th><th>Fase</th><th>Grupo</th><th>Partido</th><th>Marcador</th><th>Tries</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="clasificacion" class="section">
      <div class="container">
        <div class="card">
          <div class="groupTitle"><span class="dot azul"></span><h2 style="margin:0">Clasificaci√≥n ¬∑ Grupo AZUL</h2></div>
          <div id="tablaAzul" style="margin-top:12px"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <div class="groupTitle"><span class="dot rojo"></span><h2 style="margin:0">Clasificaci√≥n ¬∑ Grupo ROJO</h2></div>
          <div id="tablaRojo" style="margin-top:12px"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <h2>Cuchara de Madera</h2>
          <p class="muted">Se mostrar√° cuando haya resultados registrados.</p>
          <div id="cuchara" class="badge bad">por decidir</div>
        </div>
      </div>
    </section>

    <section id="reglamento" class="section">
      <div class="container">
        <div class="card">
          <h2>Reglamento ¬∑ Temporada 60</h2>
          <h3>Formato</h3>
          <ul>
            <li><strong>16 equipos</strong> repartidos en 2 grupos (Azul y Rojo) seg√∫n ranking nacional.</li>
            <li><strong>Jornadas 1‚Äì7:</strong> ida (grupos). <strong>Jornadas 8‚Äì14:</strong> vuelta, invirtiendo local/visitante.</li>
            <li><strong>Jornada 15:</strong> descanso.</li>
            <li><strong>Jornada 16:</strong> finales y cruces por puestos:
              <ul>
                <li><strong>Final:</strong> 1¬∫ Azul vs 1¬∫ Rojo (2 trofeos: campe√≥n y subcampe√≥n).</li>
                <li><strong>3¬∫ puesto:</strong> 2¬∫ Azul vs 2¬∫ Rojo (1 trofeo).</li>
                <li>Resto de equipos: cruces 3¬∫‚Äì8¬∫ por grupo para definir la clasificaci√≥n final.</li>
              </ul>
            </li>
          </ul>

          <h3>Sistema de puntuaci√≥n</h3>
          <ul>
            <li>Victoria: <strong>4</strong> puntos ¬∑ Empate: <strong>2</strong> ¬∑ Derrota: <strong>0</strong></li>
            <li>Bonus ofensivo: <strong>+1</strong> por anotar <strong>4 o m√°s tries</strong>.</li>
            <li>Bonus defensivo: <strong>+1</strong> por perder por <strong>7 o menos</strong>.</li>
          </ul>

          <h3>Clasificaci√≥n fase de grupos</h3>
          <ol>
            <li>Puntos</li>
            <li>Diferencia de puntos (PF ‚àí PC)</li>
            <li>Puntos a favor (PF)</li>
            <li>Resultado directo entre equipos empatados</li>
          </ol>

          <h3>Empate en finales</h3>
          <ol>
            <li>Tries marcados en el partido</li>
            <li>Tries totales en la competici√≥n</li>
          </ol>
        </div>
      </div>
    </section>

    <section id="contacto" class="section">
      <div class="container">
        <div class="card">
          <h2>Contacto</h2>
          <p>Para dudas y avisos, usa el <strong>foro oficial</strong> de Blackout Rugby.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">¬© <span id="year"></span> Copa Hisp√°nica ¬∑ T60 ¬∑ <a href="https://www.blackoutrugby.com/home.php" target="_blank" rel="noopener">Blackout Rugby</a></footer>

<script>
const GROUPS = {
  AZUL: [
    {name:"Baskonia", id:"82595"},
    {name:"Chamizos", id:"1558"},
    {name:"Guardo Sharks", id:"40246"},
    {name:"Subterranean Homesick Aliens", id:"79139"},
    {name:"C.R. Guindalera", id:"83261"},
    {name:"U.E Suburense", id:"82879"},
    {name:"Gipuzkoa Errugbi", id:"82824"},
    {name:"Lokomot√≠va Ko≈°ice", id:"6752"},
  ],
  ROJO: [
    {name:"Amics de la Cervesa", id:"83075"},
    {name:"C.P. Les Abelles", id:"82816"},
    {name:"Molledo S.D.", id:"6378"},
    {name:"Chamizos RC", id:"10800"},
    {name:"RIB", id:"82729"},
    {name:"Sparta de Sibaris", id:"82920"},
    {name:"Diogenes Club", id:"350"},
    {name:"Amics de la Pilsner Urquell", id:"74442"},
  ]
};
const STATE = { partidos: [] };
const fmt = (s)=> s? new Date(s.replace(' ','T')+':00').toLocaleString('es-ES',{dateStyle:'medium', timeStyle:'short'}) : '‚Äî';

async function cargarResultados(){
  const res = await fetch('results.json', {cache:'no-store'});
  const data = await res.json();
  STATE.partidos = Array.isArray(data) ? data : [];
}

function renderGrupos(){
  const azul = document.getElementById('grupoAzul');
  const rojo = document.getElementById('grupoRojo');
  azul.innerHTML = ''; rojo.innerHTML='';
  GROUPS.AZUL.forEach((t,i)=>{
    const d=document.createElement('div'); d.className='note';
    d.innerHTML = `<strong>${i+1}.</strong> ${t.name} <span class="muted">‚Äî ${t.id}</span>`;
    azul.appendChild(d);
  });
  GROUPS.ROJO.forEach((t,i)=>{
    const d=document.createElement('div'); d.className='note';
    d.innerHTML = `<strong>${i+1}.</strong> ${t.name} <span class="muted">‚Äî ${t.id}</span>`;
    rojo.appendChild(d);
  });
}

function renderCalendario(){
  const tb = document.querySelector('#tablaCal tbody'); tb.innerHTML='';
  const rows = [...STATE.partidos].filter(x=>x.fase!=="Descanso")
    .sort((a,b)=> (a.jornada??0)-(b.jornada??0) || (a.fase||'').localeCompare(b.fase||''));
  rows.forEach(r=>{
    const tr=document.createElement('tr');
    const marcador = (r.pL!=null && r.pV!=null) ? `${r.pL} ‚Äì ${r.pV}` : '‚Äî';
    const tries = (r.tL!=null && r.tV!=null) ? `${r.tL} ‚Äì ${r.tV}` : '‚Äî';
    const partido = (r.local && r.visitante) ? `${r.local} vs ${r.visitante}` : '‚Äî';
    tr.innerHTML = `<td>${r.jornada??'‚Äî'}</td><td>${fmt(r.fecha)}</td><td>${r.fase||'‚Äî'}</td><td>${r.grupo||'‚Äî'}</td><td>${partido}</td><td>${marcador}</td><td>${tries}</td>`;
    tb.appendChild(tr);
  });
}

function matchPoints(pFor, pAgainst, triesFor){
  let pts = 0;
  if(pFor > pAgainst) pts += 4;
  else if(pFor === pAgainst) pts += 2;
  if(typeof triesFor === 'number' && triesFor >= 4) pts += 1;
  if(pFor < pAgainst && (pAgainst - pFor) <= 7) pts += 1;
  return pts;
}

function initTable(teamNames){
  const t = {};
  teamNames.forEach(n=> t[n] = {Equipo:n,PJ:0,PG:0,PE:0,PP:0,PF:0,PC:0,Diff:0,Pts:0,PB_ens:0,PB_der:0});
  return t;
}

function computeGroup(groupKey){
  const teamNames = GROUPS[groupKey].map(x=>x.name);
  const tab = initTable(teamNames);

  const played = STATE.partidos.filter(p=> (p.grupo===groupKey) && (p.estado==='finalizado') && (p.pL!=null) && (p.pV!=null));
  played.forEach(p=>{
    const L = tab[p.local]; const V = tab[p.visitante];
    if(!L || !V) return;
    L.PJ++; V.PJ++;
    L.PF += p.pL; L.PC += p.pV; V.PF += p.pV; V.PC += p.pL;

    if(p.pL>p.pV){ L.PG++; V.PP++; }
    else if(p.pL<p.pV){ V.PG++; L.PP++; }
    else { L.PE++; V.PE++; }

    if(typeof p.tL==='number' && p.tL>=4) L.PB_ens++;
    if(typeof p.tV==='number' && p.tV>=4) V.PB_ens++;
    if(p.pL<p.pV && (p.pV-p.pL)<=7) L.PB_der++;
    if(p.pV<p.pL && (p.pL-p.pV)<=7) V.PB_der++;

    L.Pts += matchPoints(p.pL,p.pV,p.tL);
    V.Pts += matchPoints(p.pV,p.pL,p.tV);
  });
  Object.values(tab).forEach(r=> r.Diff = r.PF - r.PC);

  function headToHead(a,b){
    const h2h = played.filter(p=> (p.local===a && p.visitante===b) || (p.local===b && p.visitante===a));
    if(h2h.length===0) return 0;
    let ptsA = 0, ptsB = 0, diffA = 0;
    h2h.forEach(p=>{
      if(p.local===a){
        ptsA += matchPoints(p.pL,p.pV,p.tL);
        ptsB += matchPoints(p.pV,p.pL,p.tV);
        diffA += (p.pL - p.pV);
      }else{
        ptsA += matchPoints(p.pV,p.pL,p.tV);
        ptsB += matchPoints(p.pL,p.pV,p.tL);
        diffA += (p.pV - p.pL);
      }
    });
    if(ptsA !== ptsB) return ptsA - ptsB;
    return diffA;
  }

  const arr = Object.values(tab).sort((x,y)=>{
    if(y.Pts!==x.Pts) return y.Pts-x.Pts;
    if(y.Diff!==x.Diff) return y.Diff-x.Diff;
    if(y.PF!==x.PF) return y.PF-x.PF;
    return headToHead(x.Equipo,y.Equipo) * -1;
  });
  return {rows:arr, playedCount: played.length};
}

function renderTable(targetId, rows){
  const el = document.getElementById(targetId);
  const tbl = document.createElement('table');
  tbl.innerHTML = `<thead><tr>
    <th>Pos</th><th>Equipo</th><th>PJ</th><th>PG</th><th>PE</th><th>PP</th>
    <th>PF</th><th>PC</th><th>Diff</th><th>PB ens.</th><th>PB der.</th><th>Pts</th>
  </tr></thead>`;
  const tb = document.createElement('tbody');
  rows.forEach((r,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${i+1}</td><td>${r.Equipo}</td><td>${r.PJ}</td><td>${r.PG}</td><td>${r.PE}</td><td>${r.PP}</td>
      <td>${r.PF}</td><td>${r.PC}</td><td>${r.Diff}</td><td>${r.PB_ens}</td><td>${r.PB_der}</td><td><strong>${r.Pts}</strong></td>`;
    tb.appendChild(tr);
  });
  tbl.appendChild(tb);
  el.innerHTML='';
  el.appendChild(tbl);
}

function renderCuchara(allRows, anyPlayed){
  const el = document.getElementById('cuchara');
  if(!anyPlayed){ el.textContent = 'por decidir'; return; }
  const sorted = [...allRows].sort((a,b)=> a.Pts-b.Pts || a.Diff-b.Diff || a.PF-b.PF);
  el.textContent = sorted[0]?.Equipo || 'por decidir';
}

function renderProximoYUltimos(){
  const futuros = STATE.partidos.filter(p=> p.estado!=='finalizado' && p.local && p.visitante && p.fase!=="Descanso");
  const conFecha = futuros.filter(p=> p.fecha).map(p=> ({...p,cuando:new Date(p.fecha.replace(' ','T'))})).sort((a,b)=> a.cuando-b.cuando);
  const prox = conFecha[0] || futuros.sort((a,b)=> (a.jornada??0)-(b.jornada??0))[0];
  const div = document.getElementById('proximo');
  if(prox){ div.innerHTML = `<strong>${prox.local}</strong> vs <strong>${prox.visitante}</strong><br><span class="muted">${prox.fase} ¬∑ ${prox.grupo||''} ¬∑ ${prox.fecha?fmt(prox.fecha):'‚Äî'}</span>`; }
  else div.textContent='No hay partidos pendientes';

  const jugados = STATE.partidos.filter(p=> p.estado==='finalizado' && p.pL!=null && p.pV!=null)
    .sort((a,b)=> (b.jornada??0)-(a.jornada??0));
  const ul=document.getElementById('ultimos'); ul.innerHTML='';
  if(jugados.length===0){ ul.innerHTML='<li>Todav√≠a no hay resultados.</li>'; return; }
  jugados.slice(0,6).forEach(p=>{
    const li=document.createElement('li');
    li.textContent = `${p.local} ${p.pL}-${p.pV} ${p.visitante} ¬∑ ${p.fase} ¬∑ ${p.grupo||''}`;
    ul.appendChild(li);
  });
}

async function init(){
  document.getElementById('year').textContent = new Date().getFullYear();
  await cargarResultados();
  renderGrupos();
  renderCalendario();
  const azul = computeGroup('AZUL');
  const rojo = computeGroup('ROJO');
  renderTable('tablaAzul', azul.rows);
  renderTable('tablaRojo', rojo.rows);
  renderCuchara([...azul.rows, ...rojo.rows], (azul.playedCount + rojo.playedCount) > 0);
  renderProximoYUltimos();
}
init();
</script>
</body>
</html>
